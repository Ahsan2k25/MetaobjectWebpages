<div class="metaobject-landing">
    <h1>{{ metaobject.title }}</h1>
    {% assign categories = metaobject.categories.value %}
    <div class="categories">
      {% for category in categories %}
        <div class="category">
          <h2>{{ category.title }}</h2>
          {% assign posts = category.posts.value %}
          <div class="posts">
            {% for post in posts %}
              <div class="post-card">
                <h3>{{ post.title }}</h3>
                <p>{{ post.excerpt }}</p>
                <a href="{{ post.url }}">Read More</a>
              </div>
            {% endfor %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
  
  {% schema %}
  {
    "name": "Metaobject Listing",
    "tag": "section",
    "class": "metaobject-landing-section",
    "settings": [
      {
        "type": "text",
        "id": "custom_heading",
        "label": "Custom Heading",
        "default": "Metaobject Landing"
      }
    ],
    "presets": [
      {
        "name": "Metaobject Listing"
      }
    ]
  }
  {% endschema %}

{{ metaobject.configurator_name }}
{% assign collections = metaobject.configurator_collection.value %}
{% if collections.size %}
  {% for collection in collections %}
    {{ collection.collection_name }}
  {% endfor %}
{% else %}
  {{ collections.collection_name }}
{% endif %}

<h1>{{ metaobject.collection_name }}</h1>
{% assign image = metaobject.collection_image.value %}
{% if image %}
  <img src="{{ image | image_url: width: 600 }}" alt="{{ metaobject.collection_name }}">
{% endif %}

{% assign nested_collections = metaobject.configurator_nested_collection.value %}
{% if nested_collections.size > 0 %}
  <h2>Nested Collections</h2>
  <ul>
    {% for nested in nested_collections %}
      <li>
        <strong>{{ nested.collection_display_name }}</strong>
        {%- comment -%} You can also access nested.conf_product_cards.value here {%- endcomment -%}
      </li>
    {% endfor %}
  </ul>
{% endif %}

<h1>Debug</h1>
<pre>{{ metaobject | json }}</pre>

{% for nested in nested_collections %}
  <h3>{{ nested.collection_display_name }}</h3>
  {% assign product_cards = nested.conf_product_cards.value %}
  <div class="product-cards">
    {% for card in product_cards %}
      <div class="product-card">
        {% assign card_image = card.product_card_image.value %}
        {% if card_image %}
          <img src="{{ card_image | image_url: width: 300 }}" alt="{{ card.product_name }}">
        {% endif %}
        <h4>{{ card.product_name }}</h4>
        <a href="{{ card.configure_button_url }}">{{ card.configure_button_text }}</a>
      </div>
    {% endfor %}
  </div>
{% endfor %}